# データ解析の手順

**参考文献**

 - http://univprof.com/archives/16-02-11-2849465.html
 - http://univprof.com/archives/16-05-01-2850729.html

---
## `1.数値化されたデータセットを準備する`

 - 解析対象の生データを解析できるように適切に数値化する
 - データ数が多い場合はあらかじめデータを選択しておくこともある

## `2.データを見える化(可視化)する`

 - 最大値・最小値・平均値・中央値・標準偏差・相関係数などの統計量を確認
 - ヒストグラムを確認
 - 変数が多い場合は、次元圧縮を施しデータを可視化する
 - **次の外れ値処理・変数処理・ノイズ処理を行った後に、再度行うことで、より適切にデータの様子を確認できることがあります**

## `3.外れ値処理・変数処理・ノイズ処理を行う`
> データを見える化すると、使っている変数が意味のある変数かどうか、データに外れ値があるかどうか、を判断できるようになります。

 - 分散が0の変数が相関係数が1の変数の組における一方の変数を削除しても**データセット内の情報量は変わらない**
 - ヒストグラム確認後,他のデータと大きく異なる値を持つデータは、後の解析に悪影響を及ぼす可能性があるため、外れ値として削除するか検討したほうがよいです
 - スペクトルデータや時系列データを扱う際は、ノイズ処理を行うこともあります

 - **外れ値処理**
 	- 3シグマ法
 	- Hampel filter もしくは Hampel idenifer
	- 独立成分分析 (Independent Component Analysis, ICA)
	- 移動平均
 - **変数処理**
	- 標準偏差の小さい変数を削除
	- 同じ値を持つデータの割合の大きい変数を削除
	- 相関係数の高い変数の組の一方を削除

## `4.クラスタリング (クラスター解析) を行う`

> データセットの中には様々なデータが含まれています。
> データを見える化することによって、
> データが特徴的に分布しているのを確認できます。
> ここではデータセットを、
> データ間の類似度にもとづいてのかたまり (クラスター)
> ごとに分けます。これによりデータ内の構造が分かり、
> クラスタリングの結果が有用な知見となります。

## `5.回帰モデルもしくはクラス分類モデルを作る`

> 目的変数と説明変数との間の関係をモデル化します。
> 目的変数が連続値の場合は回帰分析、目的変数が離散値 (カテゴリ値) の場合はクラス分類分析になり、それぞれ回帰モデル・クラス分類モデルを作ります。
> なおモデル作成の前に、データセットをモデルを構築するためのデータセット(モデル構築用データセット) と作成されたモデルを検証するためのデータセット(モデル検証用データセット、ブラインドデータセット) に分けることが一般的です。
> あたかもモデル検証用データセットの目的変数の値が、わからないと仮定して予測を行い、実際の目的変数の値と予測された目的変数の値との、一致具合を検証します。

## `6.外れ値処理・変数処理・ノイズ処理を行いながら回帰モデルもしくはクラス分類モデルを完成させる`

> いつも最初から良好なモデルが得られるわけではありません。
> 外れ値の削除、変数選択、変数変換、スムージングなどを行いながら予測性能の高い回帰モデルもしくはクラス分類モデルを作成することを目指します。

## `7.回帰モデルもしくはクラス分類モデルを適用できるデータ領域を決める`

> 回帰モデルやクラス分類モデルが作成されると、基本的にはどんな説明変数のデータもモデルに入力することができ、目的変数の値を予測することができます。
> しかし、その予測された値を信頼して良いかどうかは話が別です。
> モデルを構築した際に用いたデータと、非常に類似したデータであれば、モデル構築用データセットにおける誤差 (回帰の場合)、もしくはエラー率 (クラス分類の場合) と、同じくらいのものを期待することができますが、類似しなくなればなるほどそれと同じような精度は期待できなくなってしまいます。
> モデル構築用データセットにおけるモデルの精度と、同じ精度を期待できるデータ領域を決めたり、予測したいデータごとに期待される誤差、もしくはエラー率を推定する仕組みを構築します。

## `8.回帰モデルもしくはクラス分類モデルを用いて予測・設計を行う`

> 回帰モデルやクラス分類モデルに、新たなデータを入力することで目的変数の値を予測し、その予測値の信頼度を計算します。
> その結果を用いて新たな材料の作り方を設計したり、新たな分子を設計したりします。
